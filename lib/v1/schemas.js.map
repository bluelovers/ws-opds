{"version":3,"file":"schemas.js","sourceRoot":"","sources":["schemas.ts"],"names":[],"mappings":"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","sourcesContent":["import { EnumLinkRel } from '../const';\nimport { getOPDSRel } from '../util';\n\nconst DATE = {\n\ttransform: function (d)\n\t{\n\t\treturn (new Date(d)).toISOString();\n\t},\n};\n\nconst AUTHOR = {\n\ttag: 'author',\n\tarray: true,\n\tfields: {\n\t\tname: {},\n\t\turi: {},\n\t\temail: {},\n\t},\n\tmap: {\n\t\tto: 'name',\n\t},\n};\n\nconst PRICE = {\n\ttag: 'opds:price',\n\tinner: 'value',\n\tattributes: {\n\t\tcurrencycode: {},\n\t},\n\tmap: {\n\t\tto: 'value',\n\t},\n};\n\nconst LINK = {\n\ttag: 'link',\n\tarray: true,\n\tattributes: {\n\t\thref: {},\n\t\ttitle: {},\n\t\trel: {\n\t\t\ttransform(v: string)\n\t\t\t{\n\t\t\t\treturn getOPDSRel(v)\n\n\t\t\t\t//return new URL(v, \"http://opds-spec.org/\").href;\n\t\t\t},\n\t\t},\n\t\ttype: {},\n\t},\n\tfields: {\n\t\tprice: PRICE,\n\t\t//prices: PRICE,\n\t},\n\tmap: {\n\t\thref: 'name',\n\t},\n};\n\nconst CATEGORY = {\n\ttag: 'category',\n\tarray: true,\n\tattributes: {\n\t\tcode: {\n\t\t\tname: 'term',\n\t\t},\n\t\tlabel: {},\n\t\tscheme: {\n\t\t\tdefault: \"http://www.bisg.org/standards/bisac_subject/index.html\",\n\t\t},\n\t},\n\tmap: {\n\t\tto: 'code',\n\t},\n};\n\nconst CONTENT = {\n\ttag: 'content',\n\tinner: 'value',\n\tcdata: true,\n\traw: true,\n\t/*\n\traw(s)\n\t{\n\t\tconsole.log(s, this, this.value.type);\n\n\t\tif (this.value.type === 'xhtml')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t//return !!(this.value.type && this.value.type != 'text');\n\t\treturn true;\n\t},\n\t*/\n\tattributes: {\n\t\ttype: {\n\t\t\tdefault: \"text\",\n\t\t},\n\t},\n\tmap: {\n\t\tto: 'value',\n\t},\n};\n\nconst ENTRY = {\n\ttag: 'entry',\n\tarray: true,\n\tfields: {\n\t\tid: {},\n\t\ttitle: {},\n\t\tupdated: DATE,\n\t\tsummary: {},\n\t\tlinks: LINK,\n\t\tauthors: AUTHOR,\n\t\tcategories: CATEGORY,\n\t\tissued: {\n\t\t\ttag: \"dc:issued\",\n\t\t\ttransform: function (d)\n\t\t\t{\n\t\t\t\treturn d.getFullYear() + \"-\" + (d.getMonth() + 1) + \"-\" + d.getDate();\n\t\t\t},\n\t\t},\n\t\tpublisher: {\n\t\t\ttag: \"dc:publisher\",\n\t\t},\n\t\tlanguage: {\n\t\t\ttag: \"dc:language\",\n\t\t},\n\t\trights: {},\n\t\tcontent: CONTENT,\n\t\tidentifier: {\n\t\t\ttag: \"dc:identifier\",\n\t\t},\n\t},\n};\n\nexport const FEED = {\n\ttag: 'feed',\n\tattributes: {\n\t\txmlns: {\n\t\t\tdefault: \"http://www.w3.org/2005/Atom\",\n\t\t},\n\t\txmlnsdc: {\n\t\t\tname: \"xmlns:dc\",\n\t\t\tdefault: \"http://purl.org/dc/terms/\",\n\t\t},\n\t\txmlnsopds: {\n\t\t\tname: \"xmlns:opds\",\n\t\t\tdefault: \"http://opds-spec.org/2010/catalog\",\n\t\t},\n\t},\n\tfields: {\n\t\tid: {},\n\t\ttitle: {},\n\t\ticon: {},\n\t\tlogo: {},\n\t\tupdated: DATE,\n\t\tlinks: LINK,\n\t\tauthors: AUTHOR,\n\t\tbooks: ENTRY,\n\t},\n};\n\nexport default FEED\n"]}